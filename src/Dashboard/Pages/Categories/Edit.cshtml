@page
@model Dashboard.Pages.Categories.EditModel
@{
	ViewData["Title"] = "Kategori Düzenle";
}

<div class="d-flex align-items-center justify-content-between mb-3">
	<h2>Kategori Düzenle: @Model.Category?.Name</h2>
	<a class="btn btn-outline-secondary" asp-page="/Categories/Index">← Geri</a>
</div>

@if (TempData["Success"] is string s)
{
	<div class="alert alert-success">@s</div>
}
@if (TempData["Error"] is string e)
{
	<div class="alert alert-danger">@e</div>
}

<form method="post" class="card">
	<div class="card-body">
		<div class="row g-3">
			<div class="col-md-6">
				<label class="form-label">Kategori Adı <span class="text-danger">*</span></label>
				<input class="form-control" asp-for="Input.Name" placeholder="Örn: Elektronik" />
				<span asp-validation-for="Input.Name" class="text-danger"></span>
			</div>
			<div class="col-md-6">
				<label class="form-label">Üst Kategori</label>
				<select class="form-select" asp-for="Input.ParentId" asp-items="Model.ParentCategories">
				</select>
				<span asp-validation-for="Input.ParentId" class="text-danger"></span>
			</div>
			<div class="col-md-12">
				<label class="form-label">Açıklama</label>
				<textarea class="form-control" asp-for="Input.Description" rows="3" placeholder="Kategori hakkında kısa açıklama..."></textarea>
				<span asp-validation-for="Input.Description" class="text-danger"></span>
			</div>
			<div class="col-md-6">
				<label class="form-label">Resim URL</label>
				<input class="form-control" asp-for="Input.ImageUrl" placeholder="https://example.com/image.jpg" />
				<span asp-validation-for="Input.ImageUrl" class="text-danger"></span>
				<div class="form-text">Kategori için görsel (opsiyonel)</div>
			</div>
			<div class="col-md-6">
				<label class="form-label">İkon Sınıfı</label>
				<input class="form-control" asp-for="Input.IconClass" placeholder="bi-phone, fas fa-laptop" />
				<span asp-validation-for="Input.IconClass" class="text-danger"></span>
				<div class="form-text">Bootstrap Icons veya Font Awesome sınıfı</div>
			</div>
			<div class="col-md-4">
				<label class="form-label">Görünüm Sırası</label>
				<input class="form-control" asp-for="Input.DisplayOrder" type="number" min="0" max="999" />
				<span asp-validation-for="Input.DisplayOrder" class="text-danger"></span>
				<div class="form-text">Düşük sayılar önce görünür</div>
			</div>
			<div class="col-md-4 form-check d-flex align-items-center">
				<input class="form-check-input me-2" type="checkbox" asp-for="Input.IsActive" />
				<label class="form-check-label">Aktif</label>
			</div>
			<div class="col-md-4 form-check d-flex align-items-center">
				<input class="form-check-input me-2" type="checkbox" asp-for="Input.IsFeatured" />
				<label class="form-check-label">Öne Çıkan</label>
			</div>
			<div class="col-md-6">
				<label class="form-label">Meta Title</label>
				<input class="form-control" asp-for="Input.MetaTitle" placeholder="SEO için meta başlık" />
				<span asp-validation-for="Input.MetaTitle" class="text-danger"></span>
			</div>
			<div class="col-md-6">
				<label class="form-label">Meta Description</label>
				<textarea class="form-control" asp-for="Input.MetaDescription" rows="2" placeholder="SEO için meta açıklama"></textarea>
				<span asp-validation-for="Input.MetaDescription" class="text-danger"></span>
			</div>
		</div>
	</div>
	<div class="card-footer d-flex justify-content-end gap-2">
		<a class="btn btn-outline-secondary" asp-page="/Categories/Index">İptal</a>
		<button class="btn btn-primary" type="submit">Güncelle</button>
	</div>
</form>

@if (Model.Category != null)
{
	<div class="card mt-3">
		<div class="card-header">
			<h5 class="mb-0">Kategori Bilgileri</h5>
		</div>
		<div class="card-body">
			<div class="row">
				<div class="col-md-6">
					<p><strong>Slug:</strong> @Model.Category.Slug</p>
					<p><strong>Oluşturulma:</strong> @Model.Category.CreatedAt.ToString("dd.MM.yyyy HH:mm")</p>
				</div>
				<div class="col-md-6">
					<p><strong>Son Güncelleme:</strong> @(Model.Category.ModifiedAt?.ToString("dd.MM.yyyy HH:mm") ?? "Henüz güncellenmemiş")</p>
					<p><strong>ID:</strong> @Model.Category.Id</p>
				</div>
			</div>
		</div>
	</div>
}

@section Scripts {
	<partial name="_ValidationScriptsPartial" />
}
